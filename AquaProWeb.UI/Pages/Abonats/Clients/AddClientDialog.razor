@using AquaProWeb.Common.Enums
@using AquaProWeb.Common.Responses.TaulesGenerals.TipusClients
@using AquaProWeb.Domain.Entities
<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h4">Agregar Cliente</MudText>
    </TitleContent>
    <DialogContent>
        <MudForm @ref="@_form" Model="ReadClientDto" OnValidSubmit="OnValidSubmit"  Validation="clientValidator.ValidateValue" >
            <MudStack Row="true">
                <MudTextField @bind-Value="ReadClientDto.Nom" For="@(() => ReadClientDto.Nom)"
                              Label="Nom"
                              Immediate="true"
                              Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>

                <MudTextField @bind-Value="ReadClientDto.PrimerCognom" For="@(() => ReadClientDto.PrimerCognom)"
                              Label="Primer Cognom"
                              Immediate="true"
                              Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>

                <MudTextField @bind-Value="ReadClientDto.SegonCognom" For="@(() => ReadClientDto.SegonCognom)"
                              Label="Segon Cognom"
                              Immediate="true"
                              Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
            </MudStack>

            
            <MudStack Row="true">
                <MudSelect T = "int" Label="Tipus Client" MultiSelection="false" @bind-Value="ReadClientDto.TipusClientId" For="@(() => ReadClientDto.TipusClientId)" Variant="Variant.Filled" Margin="Margin.Normal">
                    @foreach (var tipus in TipusClients)
                    {
                        <MudSelectItem T="int" Value="@tipus.Id">@tipus.Tipus</MudSelectItem>
                    }
                </MudSelect>
                <MudSelect T="TipusDocumentIdentificacio" Label="Tipus Document" @bind-Value="ReadClientDto.TipusDocumentIdentificacio" For="@(() => ReadClientDto.TipusDocumentIdentificacio)" Variant="Variant.Filled" Margin="Margin.Normal">
                    @foreach (var tipus in Enum.GetValues(typeof(TipusDocumentIdentificacio)).Cast<TipusDocumentIdentificacio>())
                    {
                        <MudSelectItem Value="@tipus">@tipus.ToString()</MudSelectItem>
                    }
                </MudSelect>

                <MudTextField @bind-Value="ReadClientDto.DocumentIdentificacio" For="@(() => ReadClientDto.DocumentIdentificacio)"
                              Label="Document Identitat"
                              Immediate="true"
                              Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>

                <MudDatePicker Label="Data Alta" @bind-Date="ReadClientDto.DataAlta" For="@(() => ReadClientDto.DataAlta)" Variant="Variant.Filled" Margin="Margin.Normal"/>
                <MudDatePicker Label="Data Baixa" @bind-Date="ReadClientDto.DataBaixa" For="@(() => ReadClientDto.DataBaixa)" Variant="Variant.Filled" Margin="Margin.Normal"/>
            </MudStack>

            <MudStack Row ="true">
                <MudSelect Label="Tipus Via" MultiSelection="false" @bind-Value="ReadClientDto.TipusViaId" For="@(() => ReadClientDto.TipusViaId)" Variant="Variant.Filled" Margin="Margin.Normal">
                    @foreach (var tipus in TipusVies)
                    {
                        <MudSelectItem Value="@tipus.Id">@tipus.Descripcio</MudSelectItem>
                    }
                </MudSelect>
                <MudTextField @bind-Value="ReadClientDto.Adressa" For="@(() => ReadClientDto.Adressa)"
                              Label="Adreça"
                              Immediate="true"
                              Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
            </MudStack>
            <MudGrid>
                <MudItem md="2">
                    <MudTextField @bind-Value="ReadClientDto.CodiPostal" For="@(() => ReadClientDto.CodiPostal)"
                                  Label="CP"
                                  Immediate="true"
                                  Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                </MudItem>
                
                <MudItem md="4">
                    <MudTextField @bind-Value="ReadClientDto.Poblacio" For="@(() => ReadClientDto.Poblacio)"
                                  Label="Població"
                                  Immediate="true"
                                  Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                </MudItem>
                
                <MudItem md="4">
                    <MudTextField @bind-Value="ReadClientDto.Provincia" For="@(() => ReadClientDto.Provincia)"
                                  Label="Provincia"
                                  Immediate="true"
                                  Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                </MudItem>
                
                <MudItem md="2">
                    <MudSelect Label="Pais" MultiSelection="false" @bind-Value="ReadClientDto.PaisId" For="@(() => ReadClientDto.PaisId)" Variant="Variant.Filled" Margin="Margin.Normal">
                        @foreach (var pais in Paisos)
                        {
                            <MudSelectItem Value="@pais.Id">@pais.NomPais</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
            </MudGrid>
            <MudTextField @bind-Value="ReadClientDto.ResteAdressa" For="@(() => ReadClientDto.ResteAdressa)"
                          Label="Reste Adreça"
                          Immediate="true"
                          Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>

            <MudTabs Outlined="true" Rounded="true">
                <MudTabPanel Text="Tel. Fixes" Icon="@Icons.Material.Filled.Phone">
                    <MudStack Row ="true">
                        <MudTextField @bind-Value="ReadClientDto.Telefon1" For="@(() => ReadClientDto.Telefon1)"
                                      Label="Telefon 1"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.Telefon2" For="@(() => ReadClientDto.Telefon2)"
                                      Label="Telefon 2"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.Telefon3" For="@(() => ReadClientDto.Telefon3)"
                                      Label="Telefon 3"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                    </MudStack>
                </MudTabPanel>
                <MudTabPanel Text="Tel. Mobils" Icon="@Icons.Material.Filled.PhoneAndroid">
                    <MudStack Row="true">
                        <MudTextField @bind-Value="ReadClientDto.Mobil1" For="@(() => ReadClientDto.Mobil1)"
                                      Label="Mobil 1"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.Mobil2" For="@(() => ReadClientDto.Mobil2)"
                                      Label="Mobil 2"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.Mobil3" For="@(() => ReadClientDto.Mobil3)"
                                      Label="Mobil 3"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                    </MudStack>
                </MudTabPanel>
                <MudTabPanel Text="Emails" Icon="@Icons.Material.Filled.Email">
                    <MudStack Row="true">
                        <MudTextField @bind-Value="ReadClientDto.EMail1" For="@(() => ReadClientDto.EMail1)"
                                      Label="EMail 1"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.EMail2" For="@(() => ReadClientDto.EMail2)"
                                      Label="EMail 2"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                        <MudTextField @bind-Value="ReadClientDto.EMail3" For="@(() => ReadClientDto.EMail3)"
                                      Label="EMail 3"
                                      Immediate="true"
                                      Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                    </MudStack>
                </MudTabPanel>
            </MudTabs>
            <MudGrid>
                <MudItem md="6">
                    <MudTextField @bind-Value="ReadClientDto.IBAN" For="@(() => ReadClientDto.IBAN)"
                                  Label="IBAN"
                                  Immediate="true"
                                  Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
                </MudItem>
                <MudItem md="2">
                    <MudSwitch @bind-Value="ReadClientDto.RebCartes" For="@(() => ReadClientDto.RebCartes)" Label="Reb Cartes" Color="Color.Info"/>
                </MudItem>
                <MudItem md="2">
                    <MudSwitch @bind-Value="ReadClientDto.RebFactures" For="@(() => ReadClientDto.RebFactures)" Label="Reb Factures" Color="Color.Info" />
                </MudItem>  
                <MudItem md="2">
                    <MudSwitch @bind-Value="ReadClientDto.RebRebuts" For="@(() => ReadClientDto.RebRebuts)"  Label="Reb Rebuts" Color="Color.Info" />
                </MudItem>
            </MudGrid>

            <MudTextField @bind-Value="ReadClientDto.Observacions" For="@(() => ReadClientDto.Observacions)"
                          Label="Observacions"
                          Immediate="true"
                          Variant="Variant.Filled" Margin="Margin.Normal"></MudTextField>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancelar</MudButton>
        <MudButton Color="Color.Primary" OnClick="@(async () => await Submit())">Guardar</MudButton>
    </DialogActions>
</MudDialog>


